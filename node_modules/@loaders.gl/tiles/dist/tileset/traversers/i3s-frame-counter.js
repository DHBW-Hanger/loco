"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Counter to register pending tile headers for the particular frameNumber
 * Until all tiles are loaded we won't call `onTraversalEnd` callback
 */
class I3SPendingTilesRegister {
    constructor() {
        this.frameNumberMap = new Map();
    }
    /**
     * Register a new pending tile header for the particular frameNumber
     * @param frameNumber
     */
    register(frameNumber) {
        const oldCount = this.frameNumberMap.get(frameNumber) || 0;
        this.frameNumberMap.set(frameNumber, oldCount + 1);
    }
    /**
     * Deregister a pending tile header for the particular frameNumber
     * @param frameNumber
     */
    deregister(frameNumber) {
        const oldCount = this.frameNumberMap.get(frameNumber) || 1;
        this.frameNumberMap.set(frameNumber, oldCount - 1);
    }
    /**
     * Check is there are no pending tile headers registered for the particular frameNumber
     * @param frameNumber
     * @returns
     */
    isZero(frameNumber) {
        const count = this.frameNumberMap.get(frameNumber) || 0;
        return count === 0;
    }
}
exports.default = I3SPendingTilesRegister;
