(function framework7ComponentLoader(e,t){void 0===t&&(t=!0);var a=e.$,o=e.utils,r=(e.getDevice,e.getSupport,e.Class),s=(e.Modal,e.ConstructorMethods),l=(e.ModalMethods,o.extend),n=o.deleteProps;class i extends r{constructor(e,t){void 0===t&&(t={}),super(t,[e]);const o=this,r=l({},e.params.gauge);o.useModulesParams(r),o.params=l(r,t);const{el:s}=o.params;if(!s)return o;const n=a(s);return 0===n.length?o:n[0].f7Gauge?n[0].f7Gauge:(l(o,{app:e,$el:n,el:n&&n[0]}),n[0].f7Gauge=o,o.useModules(),o.init(),o)}calcRadius(){const{size:e,borderWidth:t}=this.params;return e/2-t/2}calcBorderLength(){const e=this.calcRadius();return 2*Math.PI*e}render(){const e=this;if(e.params.render)return e.params.render.call(e,e);const{type:t,value:a,size:o,bgColor:r,borderBgColor:s,borderColor:l,borderWidth:n,valueText:i,valueTextColor:d,valueFontSize:g,valueFontWeight:c,labelText:u,labelTextColor:f,labelFontSize:h,labelFontWeight:x}=e.params,m="semicircle"===t,b=e.calcRadius(),p=e.calcBorderLength(),v=Math.max(Math.min(a,1),0);return $jsx("svg",{class:"gauge-svg",width:`${o}px`,height:`${m?o/2:o}px`,viewBox:`0 0 ${o} ${m?o/2:o}`},m&&$jsx("path",{class:"gauge-back-semi",d:`M${o-n/2},${o/2} a1,1 0 0,0 -${o-n},0`,stroke:s,"stroke-width":n,fill:r||"none"}),m&&$jsx("path",{class:"gauge-front-semi",d:`M${o-n/2},${o/2} a1,1 0 0,0 -${o-n},0`,stroke:l,"stroke-width":n,"stroke-dasharray":p/2,"stroke-dashoffset":p/2*(1+v),fill:s?"none":r||"none"}),!m&&s&&$jsx("circle",{class:"gauge-back-circle",stroke:s,"stroke-width":n,fill:r||"none",cx:o/2,cy:o/2,r:b}),!m&&$jsx("circle",{class:"gauge-front-circle",transform:`rotate(-90 ${o/2} ${o/2})`,stroke:l,"stroke-width":n,"stroke-dasharray":p,"stroke-dashoffset":p*(1-v),fill:s?"none":r||"none",cx:o/2,cy:o/2,r:b}),i&&$jsx("text",{class:"gauge-value-text",x:"50%",y:m?"100%":"50%","font-weight":c,"font-size":g,fill:d,dy:m?u?-h-15:-5:0,"text-anchor":"middle","dominant-baseline":!m&&"middle"},i),u&&$jsx("text",{class:"gauge-label-text",x:"50%",y:m?"100%":"50%","font-weight":x,"font-size":h,fill:f,dy:m?-5:i?g/2+10:0,"text-anchor":"middle","dominant-baseline":!m&&"middle"},u))}update(e){void 0===e&&(e={});const t=this,a=getDocument(),{params:o,$svgEl:r}=t;if(Object.keys(e).forEach((t=>{void 0!==e[t]&&(o[t]=e[t])})),0===r.length)return t;const{value:s,size:l,bgColor:n,borderBgColor:i,borderColor:d,borderWidth:g,valueText:c,valueTextColor:u,valueFontSize:f,valueFontWeight:h,labelText:x,labelTextColor:m,labelFontSize:b,labelFontWeight:p}=o,v=t.calcBorderLength(),$=Math.max(Math.min(s,1),0),y=t.calcRadius(),k="semicircle"===o.type,w={width:`${l}px`,height:`${k?l/2:l}px`,viewBox:`0 0 ${l} ${k?l/2:l}`};if(Object.keys(w).forEach((e=>{r.attr(e,w[e])})),k){const e={d:`M${l-g/2},${l/2} a1,1 0 0,0 -${l-g},0`,stroke:i,"stroke-width":g,fill:n||"none"},t={d:`M${l-g/2},${l/2} a1,1 0 0,0 -${l-g},0`,stroke:d,"stroke-width":g,"stroke-dasharray":v/2,"stroke-dashoffset":v/2*(1+$),fill:i?"none":n||"none"};Object.keys(e).forEach((t=>{r.find(".gauge-back-semi").attr(t,e[t])})),Object.keys(t).forEach((e=>{r.find(".gauge-front-semi").attr(e,t[e])}))}else{const e={stroke:i,"stroke-width":g,fill:n||"none",cx:l/2,cy:l/2,r:y},t={transform:`rotate(-90 ${l/2} ${l/2})`,stroke:d,"stroke-width":g,"stroke-dasharray":v,"stroke-dashoffset":v*(1-$),fill:i?"none":n||"none",cx:l/2,cy:l/2,r:y};Object.keys(e).forEach((t=>{r.find(".gauge-back-circle").attr(t,e[t])})),Object.keys(t).forEach((e=>{r.find(".gauge-front-circle").attr(e,t[e])}))}if(c){if(!r.find(".gauge-value-text").length){const e=a.createElementNS("http://www.w3.org/2000/svg","text");e.classList.add("gauge-value-text"),r.append(e)}const e={x:"50%",y:k?"100%":"50%","font-weight":h,"font-size":f,fill:u,dy:k?x?-b-15:-5:0,"text-anchor":"middle","dominant-baseline":!k&&"middle"};Object.keys(e).forEach((t=>{r.find(".gauge-value-text").attr(t,e[t])})),r.find(".gauge-value-text").text(c)}else r.find(".gauge-value-text").remove();if(x){if(!r.find(".gauge-label-text").length){const e=a.createElementNS("http://www.w3.org/2000/svg","text");e.classList.add("gauge-label-text"),r.append(e)}const e={x:"50%",y:k?"100%":"50%","font-weight":p,"font-size":b,fill:m,dy:k?-5:c?f/2+10:0,"text-anchor":"middle","dominant-baseline":!k&&"middle"};Object.keys(e).forEach((t=>{r.find(".gauge-label-text").attr(t,e[t])})),r.find(".gauge-label-text").text(x)}else r.find(".gauge-label-text").remove();return t}init(){const e=this,t=a(e.render()).eq(0);return t.f7Gauge=e,l(e,{$svgEl:t,svgEl:t&&t[0]}),e.$el.append(t),e}destroy(){const e=this;e.$el&&!e.destroyed&&(e.$el.trigger("gauge:beforedestroy"),e.emit("local::beforeDestroy gaugeBeforeDestroy",e),e.$svgEl.remove(),delete e.$el[0].f7Gauge,n(e),e.destroyed=!0)}}var d={name:"gauge",static:{Gauge:i},create(){const e=this;e.gauge=s({defaultSelector:".gauge",constructor:i,app:e,domProp:"f7Gauge"}),e.gauge.update=function(t,o){if(0===a(t).length)return;const r=e.gauge.get(t);return r?(r.update(o),r):void 0}},params:{gauge:{el:null,type:"circle",value:0,size:200,bgColor:"transparent",borderBgColor:"#eeeeee",borderColor:"#000000",borderWidth:10,valueText:null,valueTextColor:"#000000",valueFontSize:31,valueFontWeight:500,labelText:null,labelTextColor:"#888888",labelFontSize:14,labelFontWeight:400}},on:{tabMounted(e){const t=this;a(e).find(".gauge-init").each((e=>{t.gauge.create(l({el:e},a(e).dataset()||{}))}))},tabBeforeRemove(e){a(e).find(".gauge-init").each((e=>{e.f7Gauge&&e.f7Gauge.destroy()}))},pageInit(e){const t=this;e.$el.find(".gauge-init").each((e=>{t.gauge.create(l({el:e},a(e).dataset()||{}))}))},pageBeforeRemove(e){e.$el.find(".gauge-init").each((e=>{e.f7Gauge&&e.f7Gauge.destroy()}))}},vnode:{"gauge-init":{insert(e){const t=e.elm;this.gauge.create(l({el:t},a(t).dataset()||{}))},destroy(e){const t=e.elm;t.f7Gauge&&t.f7Gauge.destroy()}}}};if(t){if(e.prototype.modules&&e.prototype.modules[d.name])return;e.use(d),e.instance&&(e.instance.useModuleParams(d,e.instance.params),e.instance.useModule(d))}return d}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
