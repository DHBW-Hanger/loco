(function framework7ComponentLoader(e,a){void 0===a&&(a=!0);var t=e.$,r=e.utils,n=e.getDevice,s=e.getSupport,o=(e.Class,e.Modal,e.ConstructorMethods,e.ModalMethods,r.bindMethods);const d={open(e,a){void 0===e&&(e=".card-expandable"),void 0===a&&(a=!0);const r=this,o=n(),d=getDocument(),l=s(),c=t(e).eq(0);if(!c||!c.length)return;if(c.hasClass("card-opened")||c.hasClass("card-opening")||c.hasClass("card-closing"))return;const i=c.parents(".page").eq(0);if(!i.length)return;if(i.find(".card-opened").length)return;let p;function h(){p=!0}if(c.trigger("card:beforeopen",{prevent:h}),r.emit("cardBeforeOpen",c[0],h),p)return;const f=Object.assign({animate:a},r.params.card,c.dataset()),g=c.parents(".page-content");let b,m,v;c.attr("data-backdrop-el")&&(b=t(c.attr("data-backdrop-el"))),!b&&f.backdrop&&(b=g.find(".card-backdrop"),b.length||(b=t('<div class="card-backdrop"></div>'),g.append(b))),f.hideNavbarOnOpen&&(m=i.children(".navbar"),m.length||i[0].f7Page&&(m=i[0].f7Page.$navbarEl)),f.hideToolbarOnOpen&&(v=i.children(".toolbar"),v.length||(v=i.parents(".view").children(".toolbar")),v.length||(v=i.parents(".views").children(".toolbar")));const u=c.css("transform");let C;u&&u.match(/[2-9]/)&&(C=!0);const O=c.children(".card-content"),$=t(d.createElement("div")).addClass("card-expandable-size");c.append($);let x,k=c[0].offsetWidth,T=c[0].offsetHeight,w=i[0].offsetWidth,E=i[0].offsetHeight,N=$[0].offsetWidth||w,H=$[0].offsetHeight||E;m&&!f.hideStatusbarOnOpen&&H===E&&(x=parseInt(m.css("--f7-safe-area-top"),10),Number.isNaN(x)&&(x=0)),x&&(H-=x);let M,y,B=N/k,K=H/T,S=c.offset(),W=i.offset();if(x&&(W.top+=x/2),S.left-=W.left,C){const e=u.replace(/matrix\(|\)/g,"").split(",").map((e=>e.trim()));if(e&&e.length>1){const a=parseFloat(e[0]);M=S.left-k*(1-a)/2,y=S.top-W.top-T*(1-a)/2,r.rtl&&(M-=c[0].scrollLeft)}else M=c[0].offsetLeft,y=c[0].offsetTop-(g.length?g[0].scrollTop:0)}else M=S.left,y=S.top-W.top,r.rtl&&(M-=c[0].scrollLeft);M-=(w-N)/2,y-=(E-H)/2;let q=N-k-M;r.rtl&&([M,q]=[q,M]);let L,P,z,D,I,X,j,Y,F,A,G,J,Q=H-T-y,R=(q-M)/2,U=(Q-y)/2;function V(){i.addClass("page-with-card-opened"),o.ios&&g.length&&(g.css("height",`${g[0].offsetHeight+1}px`),setTimeout((()=>{g.css("height","")}))),c.addClass("card-opened"),c.removeClass("card-opening"),c.trigger("card:opened"),r.emit("cardOpened",c[0],i[0])}function Z(){c.removeClass("card-transitioning"),k=c[0].offsetWidth,T=c[0].offsetHeight,w=i[0].offsetWidth,E=i[0].offsetHeight,N=$[0].offsetWidth||w,H=$[0].offsetHeight||E,x=0,m&&!f.hideStatusbarOnOpen&&H===E&&(x=parseInt(m.css("--f7-safe-area-top"),10),Number.isNaN(x)&&(x=0)),x&&(H-=x),B=N/k,K=H/T,c.transform("translate3d(0px, 0px, 0) scale(1)"),S=c.offset(),W=i.offset(),x&&(W.top+=x/2),S.left-=W.left,S.top-=W.top,M=S.left-(w-N)/2,r.rtl&&(M-=c[0].scrollLeft),y=S.top-(E-H)/2,q=N-k-M,Q=H-T-y,r.rtl&&([M,q]=[q,M]),R=(q-M)/2,U=(Q-y)/2,c.transform(`translate3d(${r.rtl?-R:R}px, ${U}px, 0) scale(${B}, ${K})`),O.css({width:`${N}px`,height:`${H}px`}).transform(`translate3d(${r.rtl?M+R:-M-R}px, 0px, 0) scale(${1/B}, ${1/K})`)}function _(e){t(e.target).closest(c).length&&c.hasClass("card-opened")&&(J=c.find(f.scrollableEl),L=J[0]&&J[0]!==O[0]&&!J[0].contains(e.target)?0:J.scrollTop(),P=!0,D=e.targetTouches[0].pageX,I=e.targetTouches[0].pageY,Y=void 0,A=!1,G=!1)}function ee(e){if(P){if(X=e.targetTouches[0].pageX,j=e.targetTouches[0].pageY,void 0===Y&&(Y=!!(Y||Math.abs(j-I)>Math.abs(X-D))),G||A||(!Y&&e.targetTouches[0].clientX<=50?G=!0:A=!0),!G&&!A||A&&0!==L)return P=!0,void(z=!0);z||c.removeClass("card-transitioning"),z=!0,F=A?Math.max((j-I)/150,0):Math.max((X-D)/(k/2),0),(F>0&&A||G)&&(A&&o.ios&&J[0]===O[0]&&(J.css("-webkit-overflow-scrolling","auto"),J.scrollTop(0)),e.preventDefault()),F>1&&(F**=.3),F>(A?1.3:1.1)?(P=!1,z=!1,r.card.close(c)):c.transform(`translate3d(${r.rtl?-R:R}px, ${U}px, 0) scale(${B*(1-.2*F)}, ${K*(1-.2*F)})`)}}function ae(){P&&z&&(P=!1,z=!1,o.ios&&J.css("-webkit-overflow-scrolling",""),F>=.8?r.card.close(c):c.addClass("card-transitioning").transform(`translate3d(${r.rtl?-R:R}px, ${U}px, 0) scale(${B}, ${K})`))}f.hideNavbarOnOpen&&m&&m.length&&(m.closest(".navbar-hidden").length?c[0].f7KeepNavbarOnClose=!0:(delete c[0].f7KeepNavbarOnClose,r.navbar.hide(m,f.animate,f.hideStatusbarOnOpen,!0))),f.hideToolbarOnOpen&&v&&v.length&&(v.closest(".toolbar-hidden").length?c[0].f7KeepToolbarOnClose=!0:(delete c[0].f7KeepToolbarOnClose,r.toolbar.hide(v,f.animate))),b&&b.removeClass("card-backdrop-out").addClass("card-backdrop-in"),c.removeClass("card-transitioning"),f.animate&&c.addClass("card-opening"),c.trigger("card:open"),r.emit("cardOpen",c[0]),O.css({width:`${N}px`,height:`${H}px`}).transform(`translate3d(${r.rtl?M+R:-M-R}px, 0px, 0) scale(${1/B}, ${1/K})`),c.transform(`translate3d(${r.rtl?-R:R}px, ${U}px, 0) scale(${B}, ${K})`),f.animate?c.transitionEnd((()=>{V()})):V(),c[0].detachEventHandlers=function(){r.off("resize",Z),l.touch&&f.swipeToClose&&(r.off("touchstart:passive",_),r.off("touchmove:active",ee),r.off("touchend:passive",ae))},r.on("resize",Z),l.touch&&f.swipeToClose&&(r.on("touchstart:passive",_),r.on("touchmove:active",ee),r.on("touchend:passive",ae))},close(e,a){void 0===e&&(e=".card-expandable.card-opened"),void 0===a&&(a=!0);const r=this,s=n(),o=t(e).eq(0);if(!o||!o.length)return;if(!o.hasClass("card-opened")||o.hasClass("card-opening")||o.hasClass("card-closing"))return;const d=o.children(".card-content"),l=o.parents(".page-content"),c=o.parents(".page").eq(0);if(!c.length)return;const i=Object.assign({animate:a},r.params.card,o.dataset()),p=o.find(i.scrollableEl);let h,f,g;o.attr("data-backdrop-el")&&(g=t(o.attr("data-backdrop-el"))),i.backdrop&&(g=o.parents(".page-content").find(".card-backdrop")),i.hideNavbarOnOpen&&(h=c.children(".navbar"),h.length||c[0].f7Page&&(h=c[0].f7Page.$navbarEl),h&&h.length&&!o[0].f7KeepNavbarOnClose&&r.navbar.show(h,i.animate,!0)),i.hideToolbarOnOpen&&(f=c.children(".toolbar"),f.length||(f=c.parents(".view").children(".toolbar")),f.length||(f=c.parents(".views").children(".toolbar")),f&&f.length&&!o[0].f7KeepToolbarOnClose&&r.toolbar.show(f,i.animate)),c.removeClass("page-with-card-opened"),s.ios&&l.length&&(l.css("height",`${l[0].offsetHeight+1}px`),setTimeout((()=>{l.css("height","")}))),g&&g.length&&g.removeClass("card-backdrop-in").addClass("card-backdrop-out"),o.removeClass("card-opened card-transitioning"),i.animate?o.addClass("card-closing"):o.addClass("card-no-transition"),o.transform(""),o.trigger("card:close"),r.emit("cardClose",o[0],c[0]);const b=o.hasClass("card-expandable-animate-width");function m(){b||d.css({width:"",height:""}),g&&g.length&&g.removeClass("card-backdrop-in card-backdrop-out"),o.removeClass("card-closing card-no-transition"),o.trigger("card:closed"),o.find(".card-expandable-size").remove(),r.emit("cardClosed",o[0],c[0])}b&&d.css({width:"",height:""}),d.transform("").scrollTop(0,a?300:0),p.length&&p[0]!==d[0]&&p.scrollTop(0,a?300:0),a?d.transitionEnd((()=>{m()})):m(),o[0].detachEventHandlers&&(o[0].detachEventHandlers(),delete o[0].detachEventHandlers)},toggle(e,a){void 0===e&&(e=".card-expandable");const r=this,n=t(e).eq(0);n.length&&(n.hasClass("card-opened")?r.card.close(n,a):r.card.open(n,a))}};var l={name:"card",params:{card:{hideNavbarOnOpen:!0,hideStatusbarOnOpen:!0,hideToolbarOnOpen:!0,scrollableEl:".card-content",swipeToClose:!0,closeByBackdropClick:!0,backdrop:!0}},create(){o(this,{card:d})},on:{pageBeforeIn(e){const a=this;if(a.params.card.hideNavbarOnOpen&&e.navbarEl&&e.$el.find(".card-opened.card-expandable").length&&a.navbar.hide(e.navbarEl,!0,a.params.card.hideStatusbarOnOpen,!0),a.params.card.hideToolbarOnOpen&&e.$el.find(".card-opened.card-expandable").length){let t=e.$el.children(".toolbar");t.length||(t=e.$el.parents(".view").children(".toolbar")),t.length||(t=e.$el.parents(".views").children(".toolbar")),t&&t.length&&a.toolbar.hide(t)}}},clicks:{".card-close":function(e,a){this.card.close(a.card,a.animate)},".card-open":function(e,a){this.card.open(a.card,a.animate)},".card-expandable":function(e,a,r){e.hasClass("card-opened")||e.hasClass("card-opening")||e.hasClass("card-closing")||t(r.target).closest(".card-prevent-open, .card-close").length||this.card.open(e)},".card-backdrop-in":function(){let e=!1;this.params.card.closeByBackdropClick&&(e=!0);const a=t(".card-opened");a.length&&("true"===a.attr("data-close-by-backdrop-click")?e=!0:"false"===a.attr("data-close-by-backdrop-click")&&(e=!1),e&&this.card.close(a))}}};if(a){if(e.prototype.modules&&e.prototype.modules[l.name])return;e.use(l),e.instance&&(e.instance.useModuleParams(l,e.instance.params),e.instance.useModule(l))}return l}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
