{
  "version": 3,
  "sources": ["../../leaflet/src/core/Util.js"],
  "sourcesContent": ["/*\r\n * @namespace Util\r\n *\r\n * Various utility functions, used by Leaflet internally.\r\n */\r\n\r\n// @function extend(dest: Object, src?: Object): Object\r\n// Merges the properties of the `src` object (or multiple objects) into `dest` object and returns the latter. Has an `L.extend` shortcut.\r\nexport function extend(dest) {\r\n\tvar i, j, len, src;\r\n\r\n\tfor (j = 1, len = arguments.length; j < len; j++) {\r\n\t\tsrc = arguments[j];\r\n\t\tfor (i in src) {\r\n\t\t\tdest[i] = src[i];\r\n\t\t}\r\n\t}\r\n\treturn dest;\r\n}\r\n\r\n// @function create(proto: Object, properties?: Object): Object\r\n// Compatibility polyfill for [Object.create](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/create)\r\nexport var create = Object.create || (function () {\r\n\tfunction F() {}\r\n\treturn function (proto) {\r\n\t\tF.prototype = proto;\r\n\t\treturn new F();\r\n\t};\r\n})();\r\n\r\n// @function bind(fn: Function, \u2026): Function\r\n// Returns a new function bound to the arguments passed, like [Function.prototype.bind](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).\r\n// Has a `L.bind()` shortcut.\r\nexport function bind(fn, obj) {\r\n\tvar slice = Array.prototype.slice;\r\n\r\n\tif (fn.bind) {\r\n\t\treturn fn.bind.apply(fn, slice.call(arguments, 1));\r\n\t}\r\n\r\n\tvar args = slice.call(arguments, 2);\r\n\r\n\treturn function () {\r\n\t\treturn fn.apply(obj, args.length ? args.concat(slice.call(arguments)) : arguments);\r\n\t};\r\n}\r\n\r\n// @property lastId: Number\r\n// Last unique ID used by [`stamp()`](#util-stamp)\r\nexport var lastId = 0;\r\n\r\n// @function stamp(obj: Object): Number\r\n// Returns the unique ID of an object, assigning it one if it doesn't have it.\r\nexport function stamp(obj) {\r\n\tif (!('_leaflet_id' in obj)) {\r\n\t\tobj['_leaflet_id'] = ++lastId;\r\n\t}\r\n\treturn obj._leaflet_id;\r\n}\r\n\r\n// @function throttle(fn: Function, time: Number, context: Object): Function\r\n// Returns a function which executes function `fn` with the given scope `context`\r\n// (so that the `this` keyword refers to `context` inside `fn`'s code). The function\r\n// `fn` will be called no more than one time per given amount of `time`. The arguments\r\n// received by the bound function will be any arguments passed when binding the\r\n// function, followed by any arguments passed when invoking the bound function.\r\n// Has an `L.throttle` shortcut.\r\nexport function throttle(fn, time, context) {\r\n\tvar lock, args, wrapperFn, later;\r\n\r\n\tlater = function () {\r\n\t\t// reset lock and call if queued\r\n\t\tlock = false;\r\n\t\tif (args) {\r\n\t\t\twrapperFn.apply(context, args);\r\n\t\t\targs = false;\r\n\t\t}\r\n\t};\r\n\r\n\twrapperFn = function () {\r\n\t\tif (lock) {\r\n\t\t\t// called too soon, queue to call later\r\n\t\t\targs = arguments;\r\n\r\n\t\t} else {\r\n\t\t\t// call and lock until later\r\n\t\t\tfn.apply(context, arguments);\r\n\t\t\tsetTimeout(later, time);\r\n\t\t\tlock = true;\r\n\t\t}\r\n\t};\r\n\r\n\treturn wrapperFn;\r\n}\r\n\r\n// @function wrapNum(num: Number, range: Number[], includeMax?: Boolean): Number\r\n// Returns the number `num` modulo `range` in such a way so it lies within\r\n// `range[0]` and `range[1]`. The returned value will be always smaller than\r\n// `range[1]` unless `includeMax` is set to `true`.\r\nexport function wrapNum(x, range, includeMax) {\r\n\tvar max = range[1],\r\n\t    min = range[0],\r\n\t    d = max - min;\r\n\treturn x === max && includeMax ? x : ((x - min) % d + d) % d + min;\r\n}\r\n\r\n// @function falseFn(): Function\r\n// Returns a function which always returns `false`.\r\nexport function falseFn() { return false; }\r\n\r\n// @function formatNum(num: Number, precision?: Number|false): Number\r\n// Returns the number `num` rounded with specified `precision`.\r\n// The default `precision` value is 6 decimal places.\r\n// `false` can be passed to skip any processing (can be useful to avoid round-off errors).\r\nexport function formatNum(num, precision) {\r\n\tif (precision === false) { return num; }\r\n\tvar pow = Math.pow(10, precision === undefined ? 6 : precision);\r\n\treturn Math.round(num * pow) / pow;\r\n}\r\n\r\n// @function trim(str: String): String\r\n// Compatibility polyfill for [String.prototype.trim](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String/Trim)\r\nexport function trim(str) {\r\n\treturn str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\r\n}\r\n\r\n// @function splitWords(str: String): String[]\r\n// Trims and splits the string on whitespace and returns the array of parts.\r\nexport function splitWords(str) {\r\n\treturn trim(str).split(/\\s+/);\r\n}\r\n\r\n// @function setOptions(obj: Object, options: Object): Object\r\n// Merges the given properties to the `options` of the `obj` object, returning the resulting options. See `Class options`. Has an `L.setOptions` shortcut.\r\nexport function setOptions(obj, options) {\r\n\tif (!Object.prototype.hasOwnProperty.call(obj, 'options')) {\r\n\t\tobj.options = obj.options ? create(obj.options) : {};\r\n\t}\r\n\tfor (var i in options) {\r\n\t\tobj.options[i] = options[i];\r\n\t}\r\n\treturn obj.options;\r\n}\r\n\r\n// @function getParamString(obj: Object, existingUrl?: String, uppercase?: Boolean): String\r\n// Converts an object into a parameter URL string, e.g. `{a: \"foo\", b: \"bar\"}`\r\n// translates to `'?a=foo&b=bar'`. If `existingUrl` is set, the parameters will\r\n// be appended at the end. If `uppercase` is `true`, the parameter names will\r\n// be uppercased (e.g. `'?A=foo&B=bar'`)\r\nexport function getParamString(obj, existingUrl, uppercase) {\r\n\tvar params = [];\r\n\tfor (var i in obj) {\r\n\t\tparams.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));\r\n\t}\r\n\treturn ((!existingUrl || existingUrl.indexOf('?') === -1) ? '?' : '&') + params.join('&');\r\n}\r\n\r\nvar templateRe = /\\{ *([\\w_ -]+) *\\}/g;\r\n\r\n// @function template(str: String, data: Object): String\r\n// Simple templating facility, accepts a template string of the form `'Hello {a}, {b}'`\r\n// and a data object like `{a: 'foo', b: 'bar'}`, returns evaluated string\r\n// `('Hello foo, bar')`. You can also specify functions instead of strings for\r\n// data values \u2014 they will be evaluated passing `data` as an argument.\r\nexport function template(str, data) {\r\n\treturn str.replace(templateRe, function (str, key) {\r\n\t\tvar value = data[key];\r\n\r\n\t\tif (value === undefined) {\r\n\t\t\tthrow new Error('No value provided for variable ' + str);\r\n\r\n\t\t} else if (typeof value === 'function') {\r\n\t\t\tvalue = value(data);\r\n\t\t}\r\n\t\treturn value;\r\n\t});\r\n}\r\n\r\n// @function isArray(obj): Boolean\r\n// Compatibility polyfill for [Array.isArray](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray)\r\nexport var isArray = Array.isArray || function (obj) {\r\n\treturn (Object.prototype.toString.call(obj) === '[object Array]');\r\n};\r\n\r\n// @function indexOf(array: Array, el: Object): Number\r\n// Compatibility polyfill for [Array.prototype.indexOf](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf)\r\nexport function indexOf(array, el) {\r\n\tfor (var i = 0; i < array.length; i++) {\r\n\t\tif (array[i] === el) { return i; }\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n// @property emptyImageUrl: String\r\n// Data URI string containing a base64-encoded empty GIF image.\r\n// Used as a hack to free memory from unused images on WebKit-powered\r\n// mobile devices (by setting image `src` to this string).\r\nexport var emptyImageUrl = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';\r\n\r\n// inspired by https://paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n\r\nfunction getPrefixed(name) {\r\n\treturn window['webkit' + name] || window['moz' + name] || window['ms' + name];\r\n}\r\n\r\nvar lastTime = 0;\r\n\r\n// fallback for IE 7-8\r\nfunction timeoutDefer(fn) {\r\n\tvar time = +new Date(),\r\n\t    timeToCall = Math.max(0, 16 - (time - lastTime));\r\n\r\n\tlastTime = time + timeToCall;\r\n\treturn window.setTimeout(fn, timeToCall);\r\n}\r\n\r\nexport var requestFn = window.requestAnimationFrame || getPrefixed('RequestAnimationFrame') || timeoutDefer;\r\nexport var cancelFn = window.cancelAnimationFrame || getPrefixed('CancelAnimationFrame') ||\r\n\t\tgetPrefixed('CancelRequestAnimationFrame') || function (id) { window.clearTimeout(id); };\r\n\r\n// @function requestAnimFrame(fn: Function, context?: Object, immediate?: Boolean): Number\r\n// Schedules `fn` to be executed when the browser repaints. `fn` is bound to\r\n// `context` if given. When `immediate` is set, `fn` is called immediately if\r\n// the browser doesn't have native support for\r\n// [`window.requestAnimationFrame`](https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame),\r\n// otherwise it's delayed. Returns a request ID that can be used to cancel the request.\r\nexport function requestAnimFrame(fn, context, immediate) {\r\n\tif (immediate && requestFn === timeoutDefer) {\r\n\t\tfn.call(context);\r\n\t} else {\r\n\t\treturn requestFn.call(window, bind(fn, context));\r\n\t}\r\n}\r\n\r\n// @function cancelAnimFrame(id: Number): undefined\r\n// Cancels a previous `requestAnimFrame`. See also [window.cancelAnimationFrame](https://developer.mozilla.org/docs/Web/API/window/cancelAnimationFrame).\r\nexport function cancelAnimFrame(id) {\r\n\tif (id) {\r\n\t\tcancelFn.call(window, id);\r\n\t}\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
